/* full-screen-helper.js 1.0.3 | Copyright (c) 2020 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(l){"use strict";var n,e,t,r,c="undefined"!=typeof window?window:{},i=c.document||{},s=c.$||{},u=null,f=!1,o=!1,a=!1,d=!0,m=!1,p=!!i.exitFullscreen,h=!!i.mozCancelFullScreen,F=!(!i.webkitExitFullscreen&&!i.webkitCancelFullScreen),w=!!i.webkitCancelFullScreen,v=!!i.webkitExitFullscreen,E=!!i.msExitFullscreen,S=/(^|\s+)fsh-infullscreen($|\s+)/i,b=/(^|\s+)full-screen-helper($|\s+)/i,g=[],y=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"],x=p||h||F||E;function k(e,n){if("function"==typeof e)if(n)if(n){for(var t=[],l=0,r=g.length;l<r;l++)g[l]!==e&&t.push(e);g=t,t=null}else g.push(e);else g.push(e)}function N(e,n,t){e.addEventListener?e.addEventListener(n,t):e.attachEvent("on"+n,t)}function q(){return L()&&(c.outerWidth||c.innerWidth||n.clientWidth)==c.screen.width}function z(){if(f)return f;if(!1===r||c.ActiveXObject===l)r=!1;else if(r===l)try{r=new c.ActiveXObject("WScript.Shell"),f=!0,N(c,"resize",H)}catch(e){r=!1}return f}function C(e){27==((e=e||c.event).wich||e.keyCode)&&D()}function T(){var e;W(f?q():!!(e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement||i.msFullscreenElement)&&(e!==u&&(u=e),!0))}function H(e){clearTimeout(t),t=setTimeout(T,f?100:10)}function L(){return!!n||(e=i.body,!!(n=i.documentElement||e&&e.parentNode))}function W(e){m!==e&&u&&(L()?(e?(S.test(n.className)||(n.className+=" fsh-infullscreen"),b.test(u.className)||(u.className+=" full-screen-helper")):(n.className=n.className.replace(S," "),u.className=u.className.replace(b," "),u=null),m=e,setTimeout(A,1)):u=null)}function A(){for(var e=0;e<g.length;e++)g[e]()}function O(){return x||z()}function R(e){var n,t;if(n=e,e=!u&&(n===l||n===i?i.body:"string"==typeof n?i.querySelector(n):!(c.HTMLElement&&!(n&&n instanceof c.HTMLElement&&n.ownerDocument===i))&&!(!n||1!==n.nodeType||n.ownerDocument!==i)&&n)){if(p)e.requestFullscreen();else if(h)e.mozRequestFullScreen();else if(F)e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else if(E)e.msRequestFullscreen();else if(!a)return t=e,o||(o=!0,N(i,"keydown",C)),void(z()?q()||(u=t,W(!0),r.SendKeys("{F11}")):(a=d)&&R(t));u=e,W(!0)}}function D(){if(u){if(p)i.exitFullscreen();else if(h)i.mozCancelFullScreen();else if(v)i.webkitExitFullscreen();else if(w)i.webkitCancelFullScreen();else if(E)i.msExitFullscreen();else if(!a)return void(q()&&f&&(W(!1),r.SendKeys("{F11}")));W(!1)}}function K(e){u===(e||i.body)?D():R(e)}if(x){for(var M=y.length-1;0<=M;M--)N(i,y[M],H);N(c,"resize",H)}var $,j={supported:O,request:R,toggle:K,exit:D,current:function(){return u},state:function(){return m},viewport:function(e){d=!!e},on:function(e){k(e)},off:function(e){k(e,!0)}};s&&s.extend&&s.expr&&(s.fn.fullScreenHelper=function(e){var n=this[0];if(n)switch(e){case"toggle":K(n);break;case"request":case l:R(n)}},s.fullScreenHelper=function(e){switch(e){case"exit":D();break;case"supported":return O();case"state":return m}},s.expr[":"].fullscreen=function(e){return b.test(e.className)},"onfullscreenchange"in i||($=s(i),k(function(){$.trigger("fullscreenchange")}))),c.FullScreenHelper=j,"undefined"!=typeof exports&&(exports.FullScreenHelper=j),"undefined"!=typeof define&&define(function(){return j})}();
