/* full-screen-helper.js 1.0.0-rc3 | Copyright (c) 2017 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */
!function(e,n,t,l){"use strict";function r(e,n){if("function"==typeof e){if(!n)return void D.push(e);for(var t=[],l=D.length-1;l>=0;l--)D[l]===e&&t.push(l);for(var l=t.length-1;l>=0;l--)D.splice(t[l],1)}}function c(t){return t===l||t===e?e.body:(!n.HTMLElement||t&&t instanceof n.HTMLElement&&t.ownerDocument===e)&&t&&1===t.nodeType&&t.ownerDocument===e?t:!1}function i(e,n,t){e.addEventListener?e.addEventListener(n,t):e.attachEvent("on"+n,t)}function u(){return m(),(n.outerWidth||n.innerWidth||e.width||b.clientWidth)==n.screen.width}function s(){var n=e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement;return n?(n!==S&&(S=n),!0):!1}function f(){if(null!==x)return y;if(x===!1||"undefined"==typeof n.ActiveXObject)x=!1;else if(null===x)try{x=new n.ActiveXObject("WScript.Shell"),y=!0,i(n,"resize",d)}catch(e){x=!1}return y}function o(e){e=e||n.event,27==(e.wich||e.keyCode)&&w()}function a(){v(y?u():s())}function d(e){clearTimeout(k),k=setTimeout(a,y?100:10)}function m(){return b?!0:(g=e.body,b=e.documentElement||g&&g.parentNode,!!b)}function h(n){return N||(N=!0,i(e,"keydown",o)),f()?void(u()||(S=n,v(!0),x.SendKeys("{F11}"))):(L=z,void(L&&p(n)))}function v(e){if(C!==e&&S){if(!m())return void(S=null);e?(R.test(b.className)||(b.className+=" fsh-infullscreen"),j.test(S.className)||(S.className+=" full-screen-helper")):(b.className=b.className.replace(R," "),S.className=S.className.replace(j," "),S=null),C=e;for(var n=0,t=D.length;t>n;n++)D[n]()}}function F(){return M||y}function p(e){if(e=c(e),!S&&e!==!1){if(q)e.requestFullscreen();else if(H)e.mozRequestFullScreen();else if(T)e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else if(O)e.msRequestFullscreen();else if(!L)return void h(e);S=e,v(!0)}}function w(){if(q)e.exitFullscreen();else if(H)e.mozCancelFullScreen();else if(A)e.webkitExitFullscreen();else if(W)e.webkitCancelFullScreen();else if(O)e.msExitFullscreen();else if(!L)return void(u()&&y&&(v(!1),x.SendKeys("{F11}")));v(!1)}function E(e){S===e?w():p(e)}var b,g,S,k,x=null,y=!1,N=!1,L=!1,z=!0,C=!1,q=!!e.exitFullscreen,H=!!e.mozCancelFullScreen,T=!(!e.webkitExitFullscreen&&!e.webkitCancelFullScreen),W=!!e.webkitCancelFullScreen,A=!!e.webkitExitFullscreen,O=!!e.msExitFullscreen,R=/(^|\s+)fsh-infullscreen($|\s+)/i,j=/(^|\s+)full-screen-helper($|\s+)/i,D=[],K=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"],M=q||H||T||O;if(M&&e.addEventListener){for(var X=K.length-1;X>=0;X--)e.addEventListener(K[X],d);n.addEventListener("resize",d)}if(n.FullScreenHelper={supported:F,request:p,toggle:E,exit:w,current:function(){return S},state:function(){return C},viewport:function(e){z=!!e},on:function(e){r(e)},off:function(e){r(e,!0)}},t&&t.extend&&t.expr){var $=function(e,n){switch(e){case"toggle":n&&E(n);break;case"request":case l:n&&p(n);break;case"exit":!n&&w();break;case"supported":if(!n)return F();break;case"state":if(!n)return C}};if(t.fn.fullScreenHelper=function(e){var n=this[0];n&&$(e,n)},t.fullScreenHelper=$,t.expr[":"].fullscreen=function(e){return j.test(e.className)},!("onfullscreenchange"in e)){var _=t(e);n.FullScreenHelper.on(function(){_.trigger("fullscreenchange")})}}}(document,window,window.jQuery);
