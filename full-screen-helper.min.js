/* full-screen-helper.js 1.0.2 | Copyright (c) 2017 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(e,n,t,l){"use strict";function r(e,n){if("function"==typeof e){if(!n)return void K.push(e);if(!n)return void K.push(e);for(var t=[],l=0,r=K.length;r>l;l++)K[l]!==e&&t.push(e);K=t,t=null}}function c(t){return t===l||t===e?e.body:(!n.HTMLElement||t&&t instanceof n.HTMLElement&&t.ownerDocument===e)&&t&&1===t.nodeType&&t.ownerDocument===e?t:!1}function i(e,n,t){e.addEventListener?e.addEventListener(n,t):e.attachEvent("on"+n,t)}function u(){return d()&&(n.outerWidth||n.innerWidth||g.clientWidth)==n.screen.width}function s(){var n=e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement;return n?(n!==k&&(k=n),!0):!1}function f(){if(y)return y;if(N===!1||n.ActiveXObject===l)N=!1;else if(N===l)try{N=new n.ActiveXObject("WScript.Shell"),y=!0,i(n,"resize",m)}catch(e){N=!1}return y}function o(e){e=e||n.event,27==(e.wich||e.keyCode)&&E()}function a(){F(y?u():s())}function m(e){clearTimeout(x),x=setTimeout(a,y?100:10)}function d(){return g?!0:(S=e.body,g=e.documentElement||S&&S.parentNode,!!g)}function h(n){return z||(z=!0,i(e,"keydown",o)),f()?void(u()||(k=n,F(!0),N.SendKeys("{F11}"))):(C=T,void(C&&v(n)))}function F(e){if(q!==e&&k){if(!d())return void(k=null);e?(j.test(g.className)||(g.className+=" fsh-infullscreen"),D.test(k.className)||(k.className+=" full-screen-helper")):(g.className=g.className.replace(j," "),k.className=k.className.replace(D," "),k=null),q=e,setTimeout(w,1)}}function w(){for(var e=0;e<K.length;e++)K[e]()}function p(){return X||f()}function v(e){if(e=c(e),!k&&e!==!1){if(L)e.requestFullscreen();else if(H)e.mozRequestFullScreen();else if(W)e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else if(R)e.msRequestFullscreen();else if(!C)return void h(e);k=e,F(!0)}}function E(){if(L)e.exitFullscreen();else if(H)e.mozCancelFullScreen();else if(O)e.webkitExitFullscreen();else if(A)e.webkitCancelFullScreen();else if(R)e.msExitFullscreen();else if(!C)return void(u()&&y&&(F(!1),N.SendKeys("{F11}")));F(!1)}function b(e){k===e?E():v(e)}var g,S,k,x,N,y=!1,z=!1,C=!1,T=!0,q=!1,L=!!e.exitFullscreen,H=!!e.mozCancelFullScreen,W=!(!e.webkitExitFullscreen&&!e.webkitCancelFullScreen),A=!!e.webkitCancelFullScreen,O=!!e.webkitExitFullscreen,R=!!e.msExitFullscreen,j=/(^|\s+)fsh-infullscreen($|\s+)/i,D=/(^|\s+)full-screen-helper($|\s+)/i,K=[],M=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"],X=L||H||W||R;if(X){for(var $=M.length-1;$>=0;$--)i(e,M[$],m);i(n,"resize",m)}if(n.FullScreenHelper={supported:p,request:v,toggle:b,exit:E,current:function(){return k},state:function(){return q},viewport:function(e){T=!!e},on:function(e){r(e)},off:function(e){r(e,!0)}},t&&t.extend&&t.expr&&(t.fn.fullScreenHelper=function(e){var n=this[0];if(n)switch(e){case"toggle":b(n);break;case"request":case l:v(n)}},t.fullScreenHelper=function(e){switch(e){case"exit":E();break;case"supported":return p();case"state":return q}},t.expr[":"].fullscreen=function(e){return D.test(e.className)},!("onfullscreenchange"in e))){var _=t(e);r(function(){_.trigger("fullscreenchange")})}}(document,window,window.jQuery);
